<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Testing Pie Chart</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <style type="text/css">
        /*.slice text {
            font-size: 16pt;
            font-family: Arial;
        }*/

				/*#bar-chart{
				  height: 300px;
				  width: 90%;
				margin-left: 30%;
				}*/


    </style>
  </head>
  <body>
		<div id="bar-chart">

		<script>

		var data = [3.8]

				var h = 300;
				var w = 300;
				var barPadding = 2;
				// var datasetLength = Object.keys(data).length
				var padding = 30;
				// var barWidth = (w / datasetLength) - barPadding;
				// var formatYear = d3.format("Y")
				var formatExemptionCount = d3.format(".2s")

				// console.log(barWidth)
				//
				// var yScale = d3.scale.linear()
				// 	.domain([d3.min(data[1]), d3.max(data[1])])
				// 	.range([0, height]);
				//
				// var xScale = d3.scale.linear()
				// 	.domain([d3.min(data[0]), d3.max(data[0])])
				// 	.range([0, width]);

				// var xScale = d3.scale.ordinal()
				// 	.domain(data[0])
				// 	.rangeBands([0, width], 0.1, 0.3);

				var xScale = d3.scale.linear()
						.domain([d3.max(data, function(d){ return d; }), 0])
						//in order to get the x axis to align to the bars, i had to
						//redefine the range that it was mapped to
						.range([w, 30]);

				var yScale = d3.scale.linear()
						.domain([0, 4])
						.range([h - padding, padding]);



				var svg = d3.select("#bar-chart")
					.append("svg")
					.attr('width', w)
					.attr('height', h);


					svg.selectAll('rect')
						.data(data)
						.enter()
						.append('rect')
						.attr('class', 'bar')
						.attr("x", function(d, i) {
									return padding + 10;   //Bar width of 20 plus 1 for padding
							})
						.attr("y", function (d, i) {
								return h - padding*2;
							})
						.attr("height", padding)
						.attr("width", 60)
						.transition()
						.duration(1200)
						// .delay(function(d, i){
						// 	return i * 50;
						// })
						.attr("y", function(d, i){
							return yScale(d)
								// return yScale(d) - padding * 2
						})
						.attr("height", function(d, i){
							return h - yScale(d) - padding
								// return (h - yScale(d))
						})
						.attr("fill", function(d) {
								return "rgb(" + (yScale(d) / 2 + 190) + ", 0, 0)";
						});

				//LABELS :

				svg.selectAll("text")
					 .data(data)
					 .enter()
					 .append("text")
					 .style("fill", "white")
					 .text(function(d) {
									 return formatExemptionCount(d).replace("G", "");
							})
						.attr("x", function(d, i) {
									return 30;
							})
						 .attr("y", function(d) {
									return yScale(d) + 30;
						 });



				//AXES:

				var xAxis = d3.svg.axis()
					.scale(xScale)
					.orient("bottom")
					.ticks(0)
					// .tickFormat(formatYear);

					svg.append("g")
						.attr("class", "axis")
						.attr("transform", "translate(-6, "+ 270+")")
						.call(xAxis)





						var yAxis = d3.svg.axis()
							.scale(yScale)
							.orient("left")
							.ticks(10)
							// .tickFormat(formatYear);

						svg.append("g")
							.attr("class", "axis")
							.attr("transform", "translate(30, 0)")
							.call(yAxis)
							// .selectAll("text")
									// .style("text-anchor", "end")
									// // .attr("dx", "-.8em")
									// .attr("dy", ".15em")
									// .attr("transform", "rotate(-65)" );
</script>

  </body>
</html>
